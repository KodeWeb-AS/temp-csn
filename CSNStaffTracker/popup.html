<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSN Staff Tracker</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <img src="icons/csnlogo.gif" alt="CSN Staff Tracker" class="logo-img">
        <h1>CSN Staff Tracker</h1>
      </div>
      <div class="header-actions">
        <div class="connection-status" id="connectionStatus">
          <span class="status-dot"></span>
          <span class="status-text">Connecting...</span>
        </div>
        <button class="icon-btn" id="refreshBtn" title="Refresh Data">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path fill="none" d="M0 0h24v24H0z"/>
            <path fill="currentColor" d="M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
          </svg>
        </button>
        <button class="icon-btn" id="settingsBtn" title="Settings">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path fill="none" d="M0 0h24v24H0z"/>
            <path fill="currentColor" d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.39-.29-.61-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.23-.08-.49 0-.61.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.39.29.61.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.23.08.49 0 .61-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Navigation Tabs -->
    <div class="tabs">
      <button class="tab-btn active" data-tab="search">
        <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path fill="none" d="M0 0h24v24H0z"/>
          <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
        </svg>
        Search
      </button>
      <button class="tab-btn" data-tab="promotions">
        <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path fill="none" d="M0 0h24v24H0z"/>
          <path fill="currentColor" d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
        </svg>
        Promotions
      </button>
      <button class="tab-btn" data-tab="logs">
        <svg class="tab-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path fill="none" d="M0 0h24v24H0z"/>
          <path fill="currentColor" d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zM7 10h2v7H7zm4-3h2v10h-2zm4 6h2v4h-2z"/>
        </svg>
        Logs
      </button>
    </div>

    <!-- Search Tab Content -->
    <div class="tab-content active" id="searchTab">
      <div class="search-container">
        <div class="search-bar">
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path fill="none" d="M0 0h24v24H0z"/>
            <path fill="currentColor" d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
          </svg>
          <input type="text" id="searchInput" placeholder="Search by name or Discord ID...">
        </div>
      </div>

      <div class="results-container" id="resultsContainer">
        <!-- Search results will be displayed here -->
        <div class="empty-state">
          <svg class="empty-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48">
            <path fill="none" d="M0 0h24v24H0z"/>
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
          </svg>
          <p>Enter a name or Discord ID to search</p>
        </div>
      </div>
    </div>

    <!-- Promotions Tab Content -->
    <div class="tab-content" id="promotionsTab">
      <div class="promotions-container" id="promotionsContainer">
        <!-- Promotion-eligible staff members will be displayed here -->
        <div class="loading">
          <div class="spinner"></div>
          <p>Loading eligible promotions...</p>
        </div>
      </div>
    </div>

    <!-- Logs Tab Content -->
    <div class="tab-content" id="logsTab">
      <div class="logs-container" id="logsContainer">
        <div class="logs-header">
          <div class="logs-filters">
            <select id="logLevelFilter">
              <option value="all">All Levels</option>
              <option value="DEBUG">Debug</option>
              <option value="INFO">Info</option>
              <option value="WARN">Warning</option>
              <option value="ERROR">Error</option>
            </select>
            <button class="btn secondary-btn" id="clearLogsBtn">Clear Logs</button>
          </div>
        </div>
        <div class="logs-content" id="logsContent">
          <!-- Logs will be displayed here -->
        </div>
      </div>
    </div>

    <!-- Staff Details Modal -->
    <div class="modal" id="staffModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modalStaffName">Staff Member</h2>
          <button class="close-btn" id="closeModal">&times;</button>
        </div>
        <div class="modal-body">
          <form id="staffForm">
            <input type="hidden" id="staffId">
            
            <div class="form-group">
              <label for="staffDiscordId">Discord ID</label>
              <input type="text" id="staffDiscordId" readonly>
            </div>
            
            <div class="form-group">
              <label for="staffRank">Rank</label>
              <select id="staffRank">
                <option value="Head of Staff">Head of Staff</option>
                <option value="High Staff">High Staff</option>
                <option value="Administrator">Administrator</option>
                <option value="Department Council">Department Council</option>
                <option value="Senior Administrator">Senior Administrator</option>
                <option value="Staff Supervisor">Staff Supervisor</option>
                <option value="Senior Moderator">Senior Moderator</option>
                <option value="Discord Support">Discord Support</option>
                <option value="Moderator">Moderator</option>
                <option value="Trial Discord Support">Trial Discord Support</option>
                <option value="Trial Moderator">Trial Moderator</option>
                <option value="Paid Permissions">Paid Permissions</option>
              </select>
            </div>
            
            <div class="form-group">
              <label for="staffDatePromoted">Date Promoted</label>
              <input type="date" id="staffDatePromoted">
            </div>
            
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="staffStrike1">
                <span class="checkmark"></span>
                Strike 1
              </label>
              <input type="date" id="staffStrike1Date" class="strike-date">
            </div>
            
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="staffStrike2">
                <span class="checkmark"></span>
                Strike 2
              </label>
              <input type="date" id="staffStrike2Date" class="strike-date">
            </div>
            
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="staffStrike3">
                <span class="checkmark"></span>
                Strike 3
              </label>
              <input type="date" id="staffStrike3Date" class="strike-date">
            </div>
            
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="staffWatchlist">
                <span class="checkmark"></span>
                Watchlist
              </label>
            </div>
            
            <div class="form-group" id="watchlistReasonGroup">
              <label for="staffWatchlistReason">Watchlist Reason</label>
              <input type="text" id="staffWatchlistReason">
            </div>
            
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="staffPurgatory">
                <span class="checkmark"></span>
                In Purgatory
              </label>
            </div>
            
            <div class="form-actions">
              <button type="button" class="btn primary-btn" id="saveStaffBtn">Save Changes</button>
              <button type="button" class="btn secondary-btn" id="cancelStaffBtn">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Settings</h2>
          <button class="close-btn" id="closeSettingsModal">Ã—</button>
        </div>
        <div class="modal-body">
          <div class="settings-section">
            <h3>API Settings</h3>
            <div class="form-group">
              <label for="apiUrl">API URL:</label>
              <input type="text" id="apiUrl" value="http://localhost:3000/api" placeholder="Enter API URL">
            </div>
          </div>
          <div class="settings-section">
            <h3>Display Settings</h3>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="showStrikes" checked>
                <span>Show Strikes</span>
              </label>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="showWatchlist" checked>
                <span>Show Watchlist</span>
              </label>
            </div>
            <div class="form-group">
              <label class="checkbox-label">
                <input type="checkbox" id="showPurgatory" checked>
                <span>Show Purgatory</span>
              </label>
            </div>
          </div>
          <div class="settings-section">
            <h3>Logging</h3>
            <div class="form-group">
              <label for="logLevel">Log Level:</label>
              <select id="logLevel">
                <option value="DEBUG">Debug</option>
                <option value="INFO" selected>Info</option>
                <option value="WARN">Warning</option>
                <option value="ERROR">Error</option>
              </select>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn secondary-btn" id="cancelSettingsBtn">Cancel</button>
          <button class="btn primary-btn" id="saveSettingsBtn">Save Settings</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="utils/logger.js"></script>
  <script type="module" src="popup.js"></script>
</body>
</html> 